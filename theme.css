/* 
    主题说明：
    1. 注释前标有暂改的，有可能会在以后版本更新中修复。
    已知缺陷：
    1. 打开三个以上页面后，重启思源，resize会被挤压，页面会发生右移，需要重置窗口。
*/
:root {
    /* 主色 */
    --b3-theme-primary: #e34f8c;
    --b3-theme-primary-light: rgba(66, 133, 244, 0.54);
    --b3-theme-primary-lighter: rgba(66, 133, 244, 0.38);
    --b3-theme-primary-lightest: rgba(66, 133, 244, 0.12);
    --b3-theme-secondary: #f3a92f;
    --b3-theme-background: #212224;
    --b3-theme-surface: #292a2d;
    --b3-theme-error: #d23f31;

    /* 文字颜色 */
    --b3-theme-on-primary: #fff;
    --b3-theme-on-secondary: #fff;
    --b3-theme-on-background: #e8eaed;
    --b3-theme-on-surface: #fff;
    --b3-theme-on-error: #fff;

    /* 字体 */
    --b3-font-family: "Helvetica Neue", "Luxi Sans", "DejaVu Sans", "Hiragino Sans GB", "Microsoft Yahei", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";
    --b3-font-family-code: mononoki, Consolas, "Liberation Mono", Menlo, Courier, monospace, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";

    /* 线条 */
    --b3-border-color: rgba(255, 255, 255, .12);

    /* 滚动条 */
    --b3-scroll-color: rgba(230, 230, 230, .3);

    /* 列表 */
    --b3-list-hover: rgba(255, 255, 255, .06);

    /* 页签 */
    --b3-tab-background: #212224;

    /* 提示 */
    --b3-tooltips-color: rgba(70, 72, 76, .86);

    /* 动画效果 */
    --b3-transition: all .15s cubic-bezier(0, 0, .2, 1) 0ms;

    /* 阴影 */
    /* --b3-point-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
    --b3-dialog-shadow: 0px 11px 15px -7px rgba(0, 0, 0, 0.4); */

    /* diff */
    --b3-diff-add: #133a1c;
    --b3-diff-add-surface: #28853e;
    --b3-diff-del: #440c10;
    --b3-diff-del-surface: #b1202d;

    /* 图表颜色 */
    --b3-graph-point: #e8eaed;
    --b3-graph-line: #9aa0a6;
    --b3-graph-hl-point: #f3a92f;
    --b3-graph-hl-line: #d23f31;

    /* 编辑器工具栏高度 */
    --b3-vditor-toolbar-height: 29px;
    --b3-vditor-toolbar-height-space: 6px;

    /* 编辑器搜索颜色 */
    --b3-vditor-search-background: #32593c;
    --b3-vditor-search-border-color: #486a51;
    --b3-vditor-search-current-background: #204282;

    /* 代码片段背景 */
    --b3-vditor-code-background: rgba(66, 133, 244, .36);

    /* 即时渲染标记符颜色 */
    --b3-vditor-mark-heading-color: #9876aa;
    --b3-vditor-mark-title-color: #808080;
    --b3-vditor-mark-em-color: #cc7832;
    --b3-vditor-mark-strong-color: #cc7832;
    --b3-vditor-mark-backslash-color: #cc7832;
    --b3-vditor-mark-s-color: #9aa0a6;
    --b3-vditor-mark-mark-color: #9aa0a6;
    --b3-vditor-mark-link-color: #ffc66d;
    --b3-vditor-mark-bracket-color: #287bde;
    --b3-vditor-mark-paren-color: #6a8759;
    --b3-vditor-mark-block-color: #9876aa;
    --b3-vditor-mark-tag-color: #cc7832;

    /* 即时渲染行内元素颜色 */
    --b3-vditor-inline-strong-color: #e8eaed;
    --b3-vditor-inline-em-color: #e8eaed;
    --b3-vditor-inline-s-color: #e8eaed;
    --b3-vditor-inline-link-color: #4285f4;
    --b3-vditor-inline-mark-background: #32593c;
    --b3-vditor-inline-mark-color: #e8eaed;
    --b3-vditor-inline-tag-color: #9aa0a6;
    --b3-vditor-inline-blockref-color: #9876aa;
}

.language-graphviz polygon {
    fill: var(--b3-theme-on-surface);
}

/* 主色调 */
.vditor-ir__menu button ,.file-tree, .fn__flex-1, .vditor-ir,  .b3-list__header > .fn__flex-1, .vditor-toolbar, .fn__flex.layout-tab-bar, .layout__empty, .b3-list__header, .b3-dialog__container, .b3-text-filed.fn__block {
    background-color: #27273a;
}

/* 软件及块引用的顶、底栏背景色 */
.block__title + .fn__space.fn__flex-1, .block__icons, #barSearch + .fn__flex-1, #layouts > .layout__resize, #layouts > .layout__resize::after, .layout-tab-container.fn__flex-1, #toolbar {
    background-color: #1f2330;
}
.fn__flex ~ .fn__flex .layout-tab-container {
    background-color: #333345;
}

/* 去掉设置->账号处的割裂感 */
.config-account__center--text {
    border-left: 1px solid #414152;
    background-color: #27273a;
}

/* 块引用突出显示 */
.block__popover.block__popover--move.block__popover--open {
    border: .35rem solid #414152;
    /* border-radius: .6rem; */
}

/* 暂改：块引用Z-index防止被其他UI遮挡 */
.block__popover.block__popover--move.block__popover--open {
    z-index: 1000;
}

/* 顶栏工具的简单交互 */
#toolbar div, .ft__primary {
    color: #fff;
    transition: color .2s linear;
}
#toolbar div:hover, .ft__primary:hover {
    color: #e34f8c;
}

/* 工具栏的简单交互 */
.vditor-toolbar .vditor-toolbar__item button svg {
    color: #fff;
    transition: color .2s linear;
}
.vditor-toolbar .vditor-toolbar__item button:hover svg {
    color: #e34f8c;
}

/* 对关闭图标的简单美化 */
.b3-dialog__container svg, .b3-snackbar__close.fn__a {
    transition: color .2s linear;
}
.b3-dialog__container svg:hover, .b3-snackbar__close.fn__a:hover {
    color: #e34f8c;
}
.fn__flex.layout-tab-bar .item svg {
    transition: background-color .2s linear;
}
.fn__flex.layout-tab-bar .item svg:hover {
    background-color: #e34f8c;
}

/* 对标签页的优化 */
.layout__resize {
    margin: -1px;
}
#layouts > .fn__flex + .layout__resize::after {
    display: none;
}
.item.item--focus {
    background-color: #1f2330;
}
.fn__flex.layout-tab-bar .item {
    transition: background-color .2s linear;
}
.fn__flex.layout-tab-bar .item:hover {
    background-color: #ffffff20;
}
.fn__flex.layout-tab-bar .item  .item__graphic:hover {
    background-color: transparent;
}

/* 对鼠标右键菜单的优化 */
.b3-menu {
    border: .35rem solid #414152;
}
.b3-menu, .b3-menu .b3-menu__item {
    background-color: #27273a;
}
.b3-menu .b3-menu__item {
    transition: background-color .2s linear;
}
.b3-menu .b3-menu__item:hover {
    background-color: #e34f8c !important;
}

/* 对模态框的优化 */
.b3-dialog__action button {
    transition: background-color .2s linear;
}
.b3-dialog__action button:hover {
    background-color: #ffffff20;
}

/* 对input框的优化 */
.b3-text-filed.fn__block, .b3-text-filed.fn__flex-center.fn__size200 {
    transition: border .2s linear;
}

/* 对定位打开的文件、排序的优化 */
.b3-list__header span {
    transition: color .2s linear;
}
.b3-list__header span:hover {
    color: #e34f8c;
}

/* 对右侧、下侧打开的优化 */
.block__icon svg, .b3-list-item.b3-list-item--hide-action span {
    transition: color .2s linear !important;
}
.block__icon svg:hover {
    color: #e34f8c !important;
}

/* 对每个li选中的美化 */
.b3-list-item.b3-list-item--hide-action {
    transition: background-color .2s linear !important;
}
.b3-list-item.b3-list-item--hide-action:hover {
    background-color: #ffffff20;
}

/* 当文章在页签下侧打开时，增强分界感 */
.fn__flex + .layout__resize::after {
    min-width: 1px;
    min-height: 1px;
    background-color: #414152;
}

/* 对统计字数的优化 */
.vditor-counter.b3-tooltips.b3-tooltips__w {
    background-color: #27273a;
}

/* 对于滚动条的优化 */
/* 条纹形 */
/* ::-webkit-scrollbar-thumb {
    background-image: repeating-linear-gradient(#e34f8c60,#897691,#e34f8c60 20%);
    border-radius: 1rem;
} */
/* 单色 */
::-webkit-scrollbar-thumb {
    background-color: #9876aa70;
    border-radius: .3rem;
}

/* 对于resize的优化 */
.layout__resize--lr.layout__resize {
    background-color: #41415270;
    min-width: 1px;
    max-width: 1px;
    margin-top: 1px;
}
.layout__resize--lr.layout__resize::after {
    background-color: transparent;
}

/* 暂改：暴力解决代码块横向滚动条引起的页面拉扯 */
.vditor-ir__node[data-type="code-block"], .vditor-ir__node[data-type="yaml-front-matter"], .vditor-ir__node[data-type="math-block"] {
    max-width: 45rem;
}
.fn__flex ~ .layout__resize--lr.layout__resize ~ .fn__flex-column .layout-tab-container {
    background: #333345 !important;
}
.fn__flex > .fn__flex-column.fn__flex-shrink:nth-child(1) .layout-tab-container {
    background: #333345 !important;
}

/* 增加列表选中后的样式 */
.b3-list-item.b3-list-item--hide-action, 
.b3-list--background .b3-list-item--focus, 
.b3-list-item.b3-list-item--focus,
.b3-list-item,
.b3-list-item.b3-list-item--two {
    border-radius: .5rem;
    margin-bottom: .2rem;
    transition: all .2s linear;
}
.b3-list-item.b3-list-item--two:hover
.b3-list.b3-list--background.file-tree,
.b3-list-item:hover {
    background-color: #424253 !important;
}
.b3-list-item.b3-list-item--hide-action:hover span:nth-child(2), 
.b3-list--background .b3-list-item--focus:hover span:nth-child(2),
.b3-list-item.b3-list-item--hide-action.b3-list-item--focus span:nth-child(2),.b3-list-item.b3-list-item--hide-action.b3-list-item--focus span:nth-child(3),
.b3-list-item:hover .b3-list-item__text,
.b3-list-item.b3-list-item--focus span:nth-child(2) {
    color: #e34f8c;
}

/* 开始页面的项目颜色设置 */
.b3-list-item.b3-list-item--big {
    background-color: transparent !important;
}
.b3-list-item.b3-list-item--big span {
    transition: color .2s linear;
}
.b3-list-item.b3-list-item--big:hover span {
    color: #e34f8c;
}

/* 优化导出界面的交互 */
.b3-button.b3-button--white {
    transition: all .2s linear;
    background-color:#333345;
    color: #e6e8eb;
}
.b3-button.b3-button--white:hover {
    color: #e34f8c;
    background-color: #27273a;
    box-shadow: none;
}

/* 对设置界面的简单美化 */
.b3-list-item.b3-list-item--big {
    transition: all .2s linear;
}
.b3-list-item.b3-list-item--big:hover {
    color: #e34f8c;
}
.b3-list-item.b3-list-item--big svg {
    transition: none;
}
.b3-list-item.b3-list-item--big.b3-list-item--focus {
    color: #e34f8c;
}

/* SQL处的颜色优化 */
.search__path {
    background-color: #1f2330;
}

/* 表格颜色优化 */
/* 方案一 */
table thead tr {
    background-color: #44233b !important;
}
table tbody tr {
    background-color: #2e2335 !important;
}
/* 方案二 */
/* table thead tr {
    background-color: #4d3e38 !important;
}
table tbody tr {
    background-color: #3e3e3a !important;
} */
